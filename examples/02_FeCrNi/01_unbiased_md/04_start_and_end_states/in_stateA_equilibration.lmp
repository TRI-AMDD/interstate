#--------------------------- Simulation variables -----------------------------#
  variable          dt     equal 0.002  # Timestep [ps].
  variable          dt_t   equal 50     # Thermo information stride [ts].
  variable          dt_d   equal 500    # Dump output stride [ts].
  variable          P      equal 0      # System pressure [bars].
  variable          damp_T equal 0.1    # Thermostat damping [ps].
  variable          damp_P equal 1.0    # Barostat damping [ps].
  variable          r_Ni   equal $(1/3)  # Ratio of Ni atoms
  variable          r_Co   equal $(1/3)  # Ratio of Co atoms
  variable          r_Cr   equal 1-v_r_Ni-v_r_Co  # Ratio of Cr atoms
  variable          natoms equal 4000#500#0 # Number of atoms.
  variable          nseed  equal 10#0   # Number of atoms in the seed.

  # Determine nanoparticle diameter and box size.
  variable          v_crys equal (${a}^3)/4 # Atom vol in the seed [A^3/atom].
  variable          r_seed equal (3*${nseed}*${v_crys}/(4*PI))^(1/3) # Radius.
  variable          L equal &
                        0.5*(${nseed}*${v_crys}+(${natoms}-${nseed})*${v})^(1/3) # Half-box dimension

  # Initalizes random number generator.
  variable          rnd equal round(random(0,999999,${RANDOM}))
#------------------------------------------------------------------------------#

#---------------------------- Atomic setup ------------------------------------#
  units             metal
  timestep          ${dt}

  # Create simulation box.
  region            sim_box block -${L} ${L} -${L} ${L} -${L} ${L} units box
  create_box        3 sim_box

  # Create liquid atoms.
  variable          natoms_liquid equal ${natoms}
  region            liquid sphere 0 0 0 ${r_seed} side out units box
  create_atoms      1 random ${natoms_liquid} ${rnd} liquid
  group             liquid region liquid

 
  # Interatomic potential information.
  pair_style       eam/alloy
  pair_coeff       * * ${potentials_dir}/FeCrNi.eam.alloy Fe Cr Ni
  neigh_modify     delay 0

  # Randomly assign atom types
  set               type 1 type/ratio 2 $(v_r_Co+v_r_Cr) ${rnd}
  set               type 2 type/ratio 3 $(v_r_Cr/(v_r_Co+v_r_Cr)) ${rnd}
#------------------------------------------------------------------------------#


#--------------------------- Output setup -------------------------------------#
  thermo_style      custom step temp press pe
  thermo            ${dt_t}

  fix               f1 all print ${dt_t} &
                    "$(time) $(temp) $(pxx) $(pyy) $(pzz) $(vol/atoms)" &
                    title "# t [ps] T [K] Pxx Pyy Pzz [bar] v [A^3/atom]" &
                    screen no file ${root}/thermo/thermo_${T}K.dat
#------------------------------------------------------------------------------#


#----------------------------- Run simulation ---------------------------------#

  # Relax coordinates to avoid overlap.
  min_modify       line forcezero
  minimize         0 0 100 100   
  reset_timestep   0

  # Equilibrate liquid at fixed volume (seed doesn't move).
  velocity         liquid create $(2*v_T) ${rnd} dist gaussian rot yes
  fix              f2 liquid nvt temp ${T} ${T} ${damp_T}
  run              1500
  unfix            f2

  # Equilibrate liquid at zero pressure (crystal doesn't move).
  fix              f2 liquid npt temp ${T} ${T} ${damp_T} iso ${P} ${P} ${damp_P} dilate liquid
  run              1000
  unfix            f2

  # Print system snapshot.
  write_restart    ${root}/restart/${T}K.restart

  # Print system snapshot.
  write_dump       all custom ${root}/snapshot/snapshots_temp_${T}.dump id type x y z
#------------------------------------------------------------------------------#
